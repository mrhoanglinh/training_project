
  <div>
    <%= render 'error' %>
  </div>

  <div style="padding-left: 30px">
    <h2><%= t "admin.blog.edit.title" %></h2>
  </div>

<%= form_for [:admin, @blog], :html => {:class => "form-horizontal center"} do |f| %>
  <div class="row" style="padding-left: 20%" >
    <div class="form-group">
      <span class="form-label col-xs-2"><%= t "admin.blog.edit.form.title" %></span>
      <div class="col-lg-4">
        <%= f.text_field :title, :class => 'form-control' %>
      </div>
    </div>

    <div class="form-group">
      <span class="form-label col-xs-2"><%= t "admin.blog.edit.form.category" %></span>
      <div class="col-lg-4">
        <%= f.select :category_id, options_for_select(Category.all.map{|s|[s.name, s.id]}), {}, class: "form-control" %>
      </div>
    </div>

    <div class="form-group">
      <span class="form-label col-xs-2"><%= t "admin.blog.edit.form.datePublic" %></span>
      <div class="col-lg-4">
        <%= f.text_field :datePublic, class: 'datepicker' %>
      </div>
    </div>

    <div class="form-group">
      <span class="form-label col-xs-2"><%= t "admin.blog.edit.form.isPublic" %></span>
      <div class="col-lg-4">
        <%= f.check_box :isPublic %> <%= t "admin.blog.edit.form.setting_public" %><br />
      </div>
    </div>

    <div class="form-group">
      <span class="form-label col-xs-2"><%= t "admin.blog.edit.form.isSuggest" %></span>
      <div class="col-lg-4">
        <%= f.check_box :isSuggest %> <%= t "admin.blog.edit.form.setting_suggest" %><br />
      </div>
    </div>

    <div class="form-group">
      <span class="form-label col-xs-2"><%= t "admin.blog.edit.form.image" %></span>
      <div class="col-lg-4">
        <% if @blog.authorImage.thumb.url.nil? %>
          <img id="previewImage" style="width: 150px; height: 150px"><br />
        <% else %>
          <%= image_tag @blog.image.thumb.url %><br />
        <% end %>
        <%= f.file_field :image, onchange: 'loadImageFile(event)' %><br />
      </div>
    </div>

    <div class="form-group">
      <span class="form-label col-xs-2"><%= t "admin.blog.edit.form.content" %></span>
      <div class="col-lg-4">
        <div id ="preview"><%= link_to t("admin.blog.create.form.preview"), "" %></div>
        <%= f.cktext_area :content, id: 'content_text' %><br />
      </div>
    </div>

    <div class="form-group">
      <span class="form-label col-xs-2"><%= t "admin.blog.edit.form.author" %></span>
      <div class="col-lg-4">
        <%= f.text_field :author, :class => 'form-control' %>
      </div>
    </div>

    <div class="form-group">
      <span class="form-label col-xs-2"><%= t "admin.blog.edit.form.jobName" %></span>
      <div class="col-lg-4">
        <%= f.text_field :jobName, :class => 'form-control' %>
      </div>
    </div>

    <div class="form-group">
      <span class="form-label col-xs-2"><%= t "admin.blog.edit.form.age" %></span>
      <div class="col-lg-4">
        <%= f.text_field :age, :class => 'form-control' %>
      </div>
    </div>

    <div class="form-group">
      <span class="form-label col-xs-2"><%= t "admin.blog.edit.form.authorImage" %></span>
      <div class="col-lg-4">
        <% if @blog.authorImage.thumb.url.nil? %>
            <img id="previewAvatar" style="width: 150px; height: 150px"><br />
        <% else %>
            <%= image_tag @blog.authorImage.thumb.url %><br />
        <% end %>
        <%= f.file_field :authorImage, onchange: 'loadAvatar(event)' %><br />
      </div>
    </div>

    <div class="form-group">
      <div class="col-lg-offset-2 col-lg-4">
        <%= link_to t("admin.blog.edit.form.list"), admin_blogs_path, :class=>"btn btn-default" %>
        <%= f.submit t("admin.blog.edit.form.save"), :class => "btn btn-default btn-primary" %>
      </div>
    </div>
  </div>
<% end %>

  <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog" id="modal_content" style="padding: 15px;">
    </div>
  </div>

<script type="text/javascript">
  // show datePicker
  $(document).ready(function(){
    $('.datepicker').datepicker({
      dateFormat: '%Y-%m-%d',
      timeFormat: '%H:%M:%S'
    });
  });

  // preview image before upload
  var loadImageFile = function(event) {
    var previewImage = document.getElementById('previewImage');
    previewImage.src = URL.createObjectURL(event.target.files[0]);
  };
  // preview avatar before upload
  var loadAvatar = function(event) {
    var previewAvatar = document.getElementById('previewAvatar');
    previewAvatar.src = URL.createObjectURL(event.target.files[0])
  };

  $("#preview").on("click", function(ev)
  {
    var content = CKEDITOR.instances['content_text'].getData();
    $("#modal_content").html(content);
    $("#myModal").modal();
    ev.preventDefault();
  });

</script>


