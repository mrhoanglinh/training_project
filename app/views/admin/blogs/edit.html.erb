
  <div class="col-title-create">
    <h2><%= t "admin.blog.edit.title" %></h2>
  </div>

<%= form_for [:admin, @blog], :html => {:class => "form-horizontal center"} do |f| %>
  <div class="row">
    <div class="col-md-10 col-md-offset-1">
      <div class="form-group">
        <div class="col-sm-2">
          <span class="form-title pull-right"><%= t "admin.blog.edit.form.title" %></span>
        </div>
        <div class="col-md-10">
          <%= f.text_field :title, :class => 'form-control' %>
        </div>
      </div>

      <div class="form-group">
        <div class="col-sm-2">
          <span class="form-title pull-right"><%= t "admin.blog.edit.form.category" %></span>
        </div>
        <div class="col-md-4">
          <%= f.select :category_id, options_for_select(Category.all.map{|s|[s.name, s.id]}), {}, class: "form-control" %>
        </div>
      </div>

      <div class="form-group">
        <div class="col-sm-2">
          <span class="form-title pull-right"><%= t "admin.blog.edit.form.datePublic" %></span>
        </div>
        <div class="col-md-4">
          <%= f.text_field :datePublic, id: "datetimepicker", class: "form-control date-picker" %>
        </div>
      </div>

      <div class="form-group">
        <div class="col-sm-2">
          <span class="form-title pull-right"><%= t "admin.blog.edit.form.isPublic" %></span>
        </div>
        <div class="col-md-4">
          <%= f.check_box :isPublic %> <%= t "admin.blog.edit.form.setting_public" %><br />
        </div>
      </div>

      <div class="form-group">
        <div class="col-sm-2">
          <span class="form-title pull-right"><%= t "admin.blog.edit.form.isSuggest" %></span>
        </div>
        <div class="col-md-4">
          <%= f.check_box :isSuggest %> <%= t "admin.blog.edit.form.setting_suggest" %><br />
        </div>
      </div>

      <div class="form-group">
        <div class="col-sm-2">
          <span class="form-title pull-right"><%= t "admin.blog.edit.form.image" %></span>
        </div>
        <div class="col-md-4">
          <% if @blog.authorImage.thumb.url.nil? %>
              <img id="previewImage" style="width: 150px; height: 150px"><br />
          <% else %>
              <%= image_tag @blog.image.thumb.url %><br />
          <% end %>
          <br />
          <label class="btn btn-default btn-sm", style="width: 42px;height: 31px;line-height: 7px;">
            <%= f.file_field :image, onchange: 'loadImageFile(event)', style:"display: none" %><br /><%= t"admin.blog.edit.form.open_file"%>
          </label>
        </div>
      </div>

      <div class="form-group">
        <div class="col-sm-2">
          <span class="form-title pull-right"><%= t "admin.blog.edit.form.content" %></span>
        </div>
        <div class="col-md-10">
          <div id ="preview"><%= link_to t("admin.blog.edit.form.preview"), "" %></div>
          <%= f.cktext_area :content, id: 'content_text' %><br />
        </div>
      </div>

      <div class="form-group">
        <div class="col-sm-2">
          <span class="form-title pull-right"><%= t "admin.blog.edit.form.author" %></span>
        </div>
        <div class="col-md-4">
          <%= f.text_field :author, :class => 'form-control' %>
        </div>
      </div>

      <div class="form-group">
        <div class="col-sm-2">
          <span class="form-title pull-right"><%= t "admin.blog.edit.form.jobName" %></span>
        </div>
        <div class="col-md-4">
          <%= f.text_field :jobName, :class => 'form-control' %>
        </div>
      </div>

      <div class="form-group">
        <div class="col-sm-2">
          <span class="form-title pull-right"><%= t "admin.blog.edit.form.age" %></span>
        </div>
        <div class="col-md-4">
          <%= f.text_field :age, :class => 'form-control' %>
        </div>
      </div>

      <div class="form-group">
        <div class="col-sm-2">
          <span class="form-title pull-right"><%= t "admin.blog.edit.form.authorImage" %></span>
        </div>
        <div class="col-md-4">
          <% if @blog.authorImage.thumb.url.nil? %>
              <img id="previewAvatar" style="width: 150px; height: 150px"><br />
          <% else %>
              <%= image_tag @blog.authorImage.thumb.url %><br />
          <% end %>
          <br />
          <label class="btn btn-default btn-sm", style="width: 42px;height: 31px;line-height: 7px;">
            <%= f.file_field :authorImage, onchange: 'loadAvatar(event)', style:"display: none" %><br /><%= t"admin.blog.edit.form.open_file"%>
          </label>
        </div>
      </div>

      <div class="form-group">
        <div class="row">
          <div class="col-md-6 col-md-offset-4">
            <div class="col-md-3">
              <%= link_to t("admin.blog.edit.form.list"), admin_blogs_path, :class=>"btn btn-default" %>
            </div>
            <div class="col-md-3">
              <%= f.submit t("admin.blog.edit.form.save"), :class => "btn btn-default btn-primary" %>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
<% end %>

  <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog" id="modal_content" style="padding: 15px;">
    </div>
  </div>

<script type="text/javascript">
  // show datePicker
  $(document).ready(function(){
    $('#datetimepicker').datetimepicker({
      format: 'YYYY-MM-DD hh:mm:ss'
    });
  });

  // preview image before upload
  var loadImageFile = function(event) {
    var previewImage = document.getElementById('previewImage');
    previewImage.src = URL.createObjectURL(event.target.files[0]);
  };
  // preview avatar before upload
  var loadAvatar = function(event) {
    var previewAvatar = document.getElementById('previewAvatar');
    previewAvatar.src = URL.createObjectURL(event.target.files[0])
  };

  $("#preview").on("click", function(ev)
  {
    var content = CKEDITOR.instances['content_text'].getData();
    $("#modal_content").html(content);
    $("#myModal").modal();
    ev.preventDefault();
  });

</script>


